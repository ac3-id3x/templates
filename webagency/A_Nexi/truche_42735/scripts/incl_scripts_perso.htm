$$IF=:1:JS_ANNONCES$$
<script type="text/javascript">

   $(window).load(function(){

      var maxSize = 767;
      function module(el) {
         if(el.length > 0) {
            // GET MAX HEIGHT
            var getHeight = new Array();
            el.find('.module-annonces-homepage').each(function() {
               getHeight.push($(this).outerHeight());
            });
            getHeight.sort().reverse();
            // GET SPEED + FX
            var getSpeed = parseInt(el.attr('data-rotation'));
            var fx = el.attr('data-fx');
            // LAUNCH
            el.css('height',getHeight[0]).cycle({
               fx:fx,
               timeout:getSpeed,
               slideExpr: '.ligne-cycle',
               pager:'.nav-rotation',
               next:   '.next-module',
               prev:   '.prev-module',
               speed:1000,
               slideResize: 0,
               fit:1
            });
            // PAUSE + RESUME
            el.each(function() {
               $(this).hover(
                  function() {
                     el.cycle('pause');
                  },
                  function() {
                     el.cycle('resume');
                  }
               )
            });
         }
      }
      function module2(el) {
         if(el.length > 0) {
            // GET MAX HEIGHT
            var getHeight = new Array();
            el.find('.module-annonces-homepage2').each(function() {
               getHeight.push($(this).outerHeight());
            });
            getHeight.sort().reverse();
            // GET SPEED + FX
            var getSpeed = parseInt(el.attr('data-rotation2'));
            var fx = el.attr('data-fx2');
            // LAUNCH
            el.css('height',getHeight[0]).cycle({
               fx:fx,
               timeout:getSpeed,
               slideExpr: '.ligne-cycle2',
               pager:'.nav-rotation2',
               next:   '.next-module2',
               prev:   '.prev-module2',
               speed:1000,
               slideResize: 0,
               fit:1
            });
            // PAUSE + RESUME
            el.each(function() {
               $(this).hover(
                  function() {
                     el.cycle('pause');
                  },
                  function() {
                     el.cycle('resume');
                  }
               )
            });
         }
      }
      function launchModule(){
         if(winW > maxSize) {
            var mod = $('.rotation-module');
            if(mod.length > 1) {
               $('.next-module, .prev-module').remove();
            } else {
               module(mod)
               if (window.addEventListener) {
                  window.addEventListener("orientationchange", function() {
                     detectionWindow();
                     if(winW > maxSize) {
                        // MODULE ADS RESTART
                        mod.cycle('destroy');
                        module(mod);
                     }
                  }, false);
               }
            }
         }
         launched = 1 ;
      }
      function launchModule2(){
         if(winW > maxSize) {
            var mod = $('.rotation-module2');
            if(mod.length > 1) {
               $('.next-module2, .prev-module2').remove();
            } else {
               module2(mod)
               if (window.addEventListener) {
                  window.addEventListener("orientationchange", function() {
                     detectionWindow();
                     if(winW > maxSize) {
                        // MODULE ADS RESTART
                        mod.cycle('destroy');
                        module2(mod);
                     }
                  }, false);
               }
            }
         }
         launched = 1 ;
      }
      launched = 0 ;
      $(window).load(function() {
         if (launched == 0) {
            launchModule();
            launchModule2();
         };
      });

      $(document).ajaxComplete(function() {
         if (launched == 0) {
            launchModule();
            launchModule2();
         };
      });

      $(window).ready(function() {
         if (launched == 0) {
            launchModule();
            launchModule2();
         };
      });



      $('.module-annonces-hp').each(function() {
         $(this).hover(
            function() {
               $(this).find('.hover-infos-bien').show();
            },
            function() {
               $(this).find('.hover-infos-bien').hide();
            }
         )
      });

   });

</script>
$$END$$

$$IF=:INDEX$PUBLICATION:IDT$$
<script>
   $("#pb-btn-pro").click(function(){
      $("#pb-type").val(1);
      $(this).addClass("active");
      $("#pb-btn-part").removeClass("active");

   });
   $("#pb-btn-part").click(function(){
      $("#pb-type").val(2);
      $(this).addClass("active");
      $("#pb-btn-pro").removeClass("active");
   });
</script>
$$END$$

<script>
   $(window).load(function(){
      $(".anchor-link").click(function(){
         var cible = $(this).attr("href");
         $("html, body").animate({
            scrollTop:$(cible).offset().top - 110
         }, "slow");
         return false;
      });
   });
</script>


$$REM$$
$$IF=:NOSAGENCES:IDT$$
<script>
    // ===============================================
    // == SELECT AGENCES ==
    // ===============================================

    function btnclick(deptreg){
        console.log('deptreg');
        console.log(deptreg);
        $('.bloc-btn-agence').on('click','.btn',function(e){
            e.preventDefault();
            var newUrl = "/agences,liste.htm?dept="+deptreg;
            document.location.href = newUrl;
        });
    }

    $(window).load(function() {
        $('.select-regions').val("");
        $('.select-dept').val("");
        $('.select-ville').val("");
        $('.select-agence').val("");
        $('.select-regions').on('change',function(){
            var deptreg = $(this).val();
            var xhr = $.ajax({
                type: 'GET',
                data:"region="+deptreg,
                dataType: 'html',
                url: '/scripts,ajax_dept.htm',
                beforeSend: function() {
                    $('.select-dept').html("<option>chargement</option>");
                    $('.select-dept').addClass('opacity-2');
                    $('.select-dept').prop('disabled', 'disabled');
                },
                success: function(data) {
                    $('.select-dept').removeClass('opacity-2');
                    $('.select-dept').prop('disabled', false);
                    $('.select-dept').html(data);
                },error:function() {
                },complete:function() {
                }
            });
            btnclick(deptreg);
        });
        $('.select-dept').on('change',function(){
            var deptreg = 'Âµ' + $(this).find(':selected').data("cp");
            btnclick(deptreg);
            
            var xhr = $.ajax({
                type: 'GET',
                data:"cp="+$(this).find(':selected').data("cp"),
                dataType: 'html',
                url: '/scripts,ajax_ville.htm',
                beforeSend: function() {
                    $('.select-ville').html("<option>chargement</option>");
                    $('.select-ville').addClass('opacity-2');
                    $('.select-ville').prop('disabled', 'disabled');
                },
                success: function(data) {
                    $('.select-ville').removeClass('opacity-2');
                    $('.select-ville').prop('disabled', false);
                    $('.select-ville').html(data);
                },error:function() {
                },complete:function() {
                }
            });
        });
        
        $('.select-ville').on('change',function(){
            var deptreg = $(this).val();
            btnclick(deptreg);
        });
        $('.select-agence').on('change',function(){
            var deptreg = $(this).val();
            btnclick(deptreg);
        });
    });
</script>
$$END$$
$$END:REM$$
