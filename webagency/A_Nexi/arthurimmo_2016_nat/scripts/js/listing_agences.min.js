var regEmail=new RegExp("^[0-9a-z._-]+@{1}[0-9a-z.-]{2,}[.]{1}[a-z]{2,5}$","i"),regTel=new RegExp("^(01|02|03|04|05|06|0708|09)[0-9]{8}$","i"),geoMap=null,geoMapId=eval("geoMapId"),_FRANCE=" FRANCE",pageAcquerir,pageEstimation,regexesLocation=[[!1,new RegExp(/^(06000 nice|06200|nice)$/),"Grimaldi"],[!1,new RegExp(/^(06200 nice|06200|nice)$/),"Cordier"],[!1,new RegExp(/^(06270 villeneuve\+loubet|06270|villeneuve\+loubet)$/),"Juin"],[!1,new RegExp(/^(12100 millau|12100|millau)$/),"Barry"],[!1,new RegExp(/^(13500 martigues|13500|martigues)$/),"Chave"],[!1,new RegExp(/^(17000 la\+rochelle|17000|la\+rochelle)$/),"Joncs"],[!1,new RegExp(/^(17390 la\+tremblade|17390|la\+tremblade)$/),"Foran"],[!1,new RegExp(/^(20260 calvi|20260|calvi)$/),"Plena"],[!1,new RegExp(/^(25000 besancon|25000|besancon)$/),"Carmes"],[!1,new RegExp(/^(33230 coutras|33230|coutras)$/),"Valmy"],[!1,new RegExp(/^(34000 montpellier|34000|montpellier)$/),"Miro"],[!1,new RegExp(/^(34150 gignac|34150|gignac)$/),"Canalet"],[!0,new RegExp(/^(38490 les abrets-en-dauphiné|38490|les abrets-en-dauphiné)$/),"38490 Les Abrets"+_FRANCE],[!1,new RegExp(/^(38510 vézeronce-curtin|38510|vézeronce-curtin)$/),"Levaz"],[!1,new RegExp(/^(40200 mimizan|40200|mimizan)$/),"Degas"],[!1,new RegExp(/^(42330 saint-galmier|42330|saint-galmier)$/),"Dupuy"],[!1,new RegExp(/^(45000 orléans|45000|orléans)$/),"Royale"],[!1,new RegExp(/^(47550 boé|47550|boé)$/),"Neveu"],[!1,new RegExp(/^(54000 nancy|54000|nancy)$/),"Lamour"],[!1,new RegExp(/^(56400 brech|brech)$/),"Roses"],[!1,new RegExp(/^(56400 le\+bono|le\+bono)$/),"Hoche"],[!1,new RegExp(/^(64000 pau|64000|pau)$/),"Garet"],[!1,new RegExp(/^(65800 orleix|65800|orleix)$/),"Cibat"],[!1,new RegExp(/^(67000 strasbourg|67000|strasbourg)$/),"Clément"],[!1,new RegExp(/^(67500 haguenau|67500|haguenau)$/),"Foch"],[!1,new RegExp(/^(73420 viviers-du-lac|73420|viviers-du-lac)$/),"Laitière"],[!1,new RegExp(/^(76600 le\+havre|76600|le\+havre)$/),"Chillou"],[!1,new RegExp(/^(77176 savigny-le-temple|77176|savigny-le-temple)$/),"Hulotte"],[!1,new RegExp(/^(77310 saint-fargeau-ponthierry|77310|saint-fargeau-ponthierry)$/),"Boulay"],[!0,new RegExp(/^(77580 crécy-la-chapelle|77580 crécy la chapelle|77580 crecy-la-chapelle|77580 crecy la chapelle|crecy-la-chapelle|crecy la chapelle|crécy-la-chapelle|crécy la chapelle)$/),"Crécy-la-Chapelle Loges"],[!1,new RegExp(/^(83120 sainte-maxime|83120|sainte-maxime)$/),"Etienne"],[!1,new RegExp(/^(83140 six-fours-les-plages|83140|six-fours-les-plages)$/),"Stade"],[!1,new RegExp(/^(83170 brignoles|83170|brignoles)$/),"Broquier"],[!0,new RegExp(/^(83371 saint-aygulf|83371|saint-aygulf)$/),"saint-aygulf var"+_FRANCE],[!1,new RegExp(/^(83600 fréjus|83600|fréjus)$/),"Couvent"],[!1,new RegExp(/^(83700 saint-raphaël|83700|saint-raphaël)$/),"Basso"],[!1,new RegExp(/^(83980 le\+lavandou|83980|le\+lavandou)$/),"Stade"],[!1,new RegExp(/^(85300 challans|85300|challans)$/),"Gobin"],[!1,new RegExp(/^(85470 bretignolles-sur-mer|85470|bretignolles-sur-mer)$/),"Bel Air"],[!0,new RegExp(/^(87260|saint-paul|saint paul|st-paul|st paul)$/),"87260 Saint Paul"+_FRANCE],[!1,new RegExp(/^(91090 lisses|91090|lisses)$/),"Valois"],[!1,new RegExp(/^(94190 villeneuve-saint-georges|94190|villeneuve-saint-georges)$/),"Duruy"],[!0,new RegExp(/^(97400|97400 saint-denis|97400 saint denis)$/),"Saint-Denis, La Réunion"],[!0,new RegExp(/^(97410|97410 saint-pierre|97410 saint pierre)$/),"Saint-Pierre, La Réunion"],[!0,new RegExp(/^(alpes-maritimes|alpes maritimes)$/),"Alpes-Maritimes paca"],[!0,new RegExp(/^(aulnay)$/),"17470 Aulnay"],[!0,new RegExp(/^(chambly)$/),"60 Chambly"+_FRANCE],[!0,new RegExp(/^(laval)$/),"53000 Laval"+_FRANCE],[!0,new RegExp(/^(la rochelle)$/),"17000 La Rochelle"+_FRANCE],[!0,new RegExp(/^(la tour du pin')$/),"la Tour du Pin"+_FRANCE],[!0,new RegExp(/^(loire)$/),"42"+_FRANCE],[!0,new RegExp(/^(paris 11)$/),"rue Faidherbe Paris 11"+_FRANCE],[!0,new RegExp(/^(paris 12)$/),"paris 12ème"+_FRANCE],[!0,new RegExp(/^(pont de vaux)$/),"Pont de Vaux"+_FRANCE],[!0,new RegExp(/^(salles)$/),"33770 Salles"+_FRANCE]];function setLocationUserVal(e,a){var n=e,l=decodeURI(e).toLowerCase();for(l.match(/^(ain|finistere|finistère|nord|somme|albert|ham)$/)&&(n+=_FRANCE),v=0;v<a.length;v++)l.match(a[v][1])&&(n=a[v][0]?a[v][2]:n+" "+a[v][2]);return n}function updateGeoMap(e,a){if(null==geoMap&&(geoMap=id3xContent.getMap({typeSearch:1,search:geoMapId})),null!=geoMap){var n=null;null!=a&&(n=a.toString().match(/^(13500|25000|29200|29600|33480|40200|40600|45000|65100|67500|77300|80200|83170|83700|92000)$/)?a:null),id3xContent.geolocation.manager.sendRequestToGeolocationApi({address:setLocationUserVal(e.trim(),regexesLocation),business:"1",mapObject:geoMap,postCode:n})}}function searchListeBiens(e,t,a){if(t.hasClass("searchDone"))return!1;$.ajax({type:"GET",data:"idpublication="+e+"&lang="+a,dataType:"json",url:"/agences,search_liste_biens.htm",beforeSend:function(){},success:function(e){var a=t.children(".liste-biens");if(e.transaction){var n=e.transaction.length,l='<ul class="nav nav-pills nav-stacked nav-biens-agence">';for(i=0;i<n;i++)l+='<li><a href="'+e.transaction[i].url+'">'+e.transaction[i].nbannonces+" "+e.transaction[i].name+"</a></li>";l+="</ul>",a.html(a.html()+l)}else a.append(e.message)},error:function(e,a,n){console.log(e,a,n)},complete:function(){t.addClass("searchDone")}})}function sliderAgence(e,a){$("html").hasClass("ie7")?e.hasClass("blocOpen")?e.addClass("display-none").removeClass("blocOpen").removeClass("display-show"):e.addClass("display-show").addClass("blocOpen"):e.hasClass("blocOpen")?e.slideUp(200,"swing",function(){$(this).removeClass("blocOpen")}):e.slideDown(300,"swing",function(){$(this).addClass("blocOpen")}),a&&a()}function goEstimation(e){if(1==pageEstimation)window.location.href="/"+e.target.IDP+"/estimation,immobiliere.htm";else{if(1!=pageAcquerir)return!1;window.location.href="/"+e.target.IDP+"/acquereur,demande.htm"}}function btnclick(a){$(".bloc-btn-agence").on("click",".btn",function(e){e.preventDefault(),document.location.href="/agences,liste.htm?dept="+a})}$(document).ready(function(){$(".select-ville").val(""),$(".select-ville").on("change",function(e){if(0<e.target.selectedIndex){var a=$(this).val();btnclick(a),updateGeoMap(a,$(this).find(":selected").data("cp")),0<$(".select-agence").prop("selectedIndex")&&$(".select-agence").val("").trigger("change"),0<$(".select-dept").prop("selectedIndex")&&$(".select-dept").val("").trigger("change")}}),$(".zone-agence-ajax, .detail-agence-liste").on("click",'.bouton-message-agence, .bouton-carte-agence, .bouton-biens-agence, div[class*="bouton-biens-agence"]',function(e){e.preventDefault();var a=0,n=0,l=$(this).attr("class");if($(this).hasClass("bouton-carte-agence")){var i=$(this).parent().parent().parent().children(".zone-carte-agence");a=1}else if(-1<l.indexOf("bouton-biens-agence"))i=$(this).parent().parent().parent().children(".zone-biens-agence"),n=1;else i=$(this).parent().parent().parent().children(".zone-message-agence");if(1==a){var t=i.children().children().attr("id"),s=i.children().children().attr("data-rel");fixPinAgenceClick(t,s,arrayOfAgencies)}else 1==n&&searchListeBiens($(this).attr("data-rel"),i,$(this).attr("data-langue"));var r=$("div").find(".blocOpen");r.hasClass("blocOpen")?sliderAgence(r,function(){sliderAgence(i)}):sliderAgence(i)}),$("#triAgences").change(function(){var e=$(this).val(),a=$("#form-tri").attr("action");0<e.length&&(0<a.indexOf("?")?a+="&tri="+e:a+="?tri="+e),window.location.href=a}),$(".bouton-search-user").click(function(e){e.preventDefault(),updateGeoMap($("#searchGeolocUser").val(),null)}),$("#searchGeolocUser").keydown(function(e){13==e.keyCode&&updateGeoMap($("#searchGeolocUser").val(),null)}),winW<840&&($(".txt-agence").removeClass("hidden-phone"),$(".txt-agence").addClass("display-none"),$(".plus-text").addClass("general typoicon-plus"),$(".phrase-agences").on("click",function(){"+"==$(this).parent().children(".plus-text ").html()?$(this).parent().children(".plus-text ").html("-"):$(this).parent().children(".plus-text ").html("+"),$(".txt-agence").slideToggle()}))});