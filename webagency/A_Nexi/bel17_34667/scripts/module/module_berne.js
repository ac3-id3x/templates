$(document).ready(function() {	$t = $('#moduleBerne');	$t.find('.container').css('overflow','hidden');	$t.find('.rightModule').css('overflow','hidden');	// MGT UL	var $firstUL = $t.find('ul[id*=divModule]').first();	$firstUL.show();	var $countUL = $t.find('ul[id*=divModule]').length;	for(i = 2; i <= $countUL; i++) {		$t.find('#divModule'+i).hide();	}	// MGT LI	var $liFirst = $firstUL.find('li').first();	// GET ID LI FOR PICTURE	var $idFirst = $liFirst.attr('id').split('bloc');	// MGT PHOTO MODULE	var $firstModulePhoto = $t.find('ul[id*=photoModule]').first();	$firstModulePhoto.find('li').each(function() {		var $testFirst = 'photoListe'+$idFirst[1];		if($(this).attr('id') == $testFirst) {			$(this).show();			$(this).addClass('imageOn');		} else {			$(this).hide();			$(this).removeClass('imageOn');		}	});	$firstModulePhoto.show();	var $actif = $t.find('.actifSpan');	// CALCUL MODULE FOR OVERFLOW	var $module = $t.find('.moduleDiv');	$module.height($liFirst.height() * 4)// MGT SPAN	$t.find('.actifSpan, .noActifSpan').each(function() {		$(this).css('cursor','pointer');		$(this).each(function() {			$(this).click(function() {				// FIND ACTIF				var $actif = $t.find('.actifSpan');				var $id_actif = ($actif.index()/2)+1				if($(this).hasClass('actifSpan')) {					return false;				} else {					$actif.removeClass('actifSpan');					$actif.addClass('noActifSpan');					var $id = ($(this).index() / 2) + 1;					// FIX					$('#divModule'+$id_actif).removeClass('actifUL');					$('#divModule'+$id_actif).hide();					$('#photoModule'+$id_actif).hide();					$('#divModule'+$id).addClass('actifUL');					$('#divModule'+$id).show();					$('#photoModule'+$id).show();					$(this).addClass('actifSpan');				}			});		});	});	// MGT LINE	$t.find('.ligneModuleBerne').each(function() {		var $tLigne = $(this);		$tLigne.css('cursor','pointer');		// FIXING FIRST LOADING		if($tLigne.index() == 0) {			$(this).find('.pucePlus').show();			$(this).addClass('rollOverLigneModule');		} else {			$(this).find('.pucePlus').hide();			$(this).removeClass('rollOverLigneModule');		}		// MOUSEOVER		$tLigne.mouseover(function() {				var $modulePicture = $('.rightModule');				// FIXING OLD								var $old = $(this).parent().find('.rollOverLigneModule');				$old.find('.pucePlus').hide();				$old.removeClass('rollOverLigneModule');				// FIXING OLD PICTURE				var $old_picture = $modulePicture.find('.imageOn');				$old_picture.hide();				$old_picture.removeClass('imageOn');				// FIXING NEW				$(this).find('.pucePlus').show();				$(this).addClass('rollOverLigneModule');				// FIXING NEW PICTURE				var $idLigne = $(this).attr('id').split('bloc');				var $moduleListe = $(this).parent().attr('id').split('divModule');				var $containerPhoto = '#photoModule'+$moduleListe[1]				var $new_pic = $modulePicture.find($containerPhoto).find('#photoListe'+$idLigne[1]);				$new_pic.addClass('imageOn');				$new_pic.show();		});	});	var bouton = 0;	// MGT UP/DOWN 	$('.flecheUp').css('cursor','pointer');	$('.flecheUp').click(function() {		if(bouton == 0) {			bouton = 1;			$ulRunning = $t.find('.actifUL');			var $heightGlobal = $ulRunning.find('li').height() * $ulRunning.find('li').length;			var $height = $ulRunning.find('li').height() * 4;			var $max = $heightGlobal * -1;			var $currentY = parseInt($ulRunning.css('top'));			var $calcul = $currentY-$height;			if($calcul == $max || ($calcul * -1) >= $heightGlobal) {				$calcul = 0;				$ulRunning.css('top',$calcul+'px');				fixPosition($ulRunning,$calcul);				bouton = 0;			} else {				$ulRunning.animate({top:$calcul+'px'},250, function() {bouton = 0;fixPosition($ulRunning,$calcul)});			}		}	});	$('.flecheDown').css('cursor','pointer');	$('.flecheDown').click(function() {		if(bouton == 0) {			bouton = 1;			$ulRunning = $t.find('.actifUL');			var $heightGlobal = $ulRunning.find('li').height() * $ulRunning.find('li').length;			var $height = $ulRunning.find('li').height() * 4;			var $max = $heightGlobal * -1;			var $currentY = parseInt($ulRunning.css('top'));			var $calcul = $currentY+$height;			if(($calcul > $currentY && $currentY == 0)) {				$calcul = $max + $height;				$ulRunning.css('top',$calcul+'px');				fixPosition($ulRunning,$calcul);				bouton = 0;			} else {				var $fix_pos = $height + $currentY;				if($fix_pos > 0) {					$calcul = 0;				}				$ulRunning.animate({top:$calcul+'px'},250, function() {bouton = 0;fixPosition($ulRunning,$calcul)});			}		}	});});function fixPosition($t,$c) {	$t.find('li').each(function() {		var $position = $(this).position();		if($position.top == ($c * -1)) {			// FIX LINE			var $old = $t.find('.rollOverLigneModule');			$old.find('.pucePlus').hide();			$old.removeClass('rollOverLigneModule');			$(this).addClass('rollOverLigneModule');			$(this).find('.pucePlus').show();			// FIX PICTURE			var $id_module = $t.attr('id').split('divModule');			var $module_photo = $('#photoModule'+$id_module[1]);			var $new_id = $(this).attr('id').split('bloc');			var $photo = $module_photo.find('.imageOn');			$photo.hide();			$photo.removeClass('imageOn');			var $new_pic = $module_photo.find('#photoListe'+$new_id[1]);			$new_pic.addClass('imageOn');			$new_pic.show();		}	});}