<script type="text/javascript">
	$$IF:FEAU$$
	$('#mailadresse').change(function(){
		var mailadresse = $('#mailadresse').val();
		$("#civ option:selected").each(function () {
			var civ = $(this).val();
			bonmail(mailadresse,civ);
		});
	});
	$('#civ').change(function(){
		$("#civ option:selected").each(function () {
			var civ = $(this).val();
			var mailadresse = $('#mailadresse').val();
			bonCivilite(civ,mailadresse);
		});
	});
	function bonmail(mailadresse,civ){
		var reg = new RegExp('^[a-z0-9]+([_|\.|-]{1}[a-z0-9]+)*@[a-z0-9]+([_|\.|-]{1}[a-z0-9]+)*[\.]{1}[a-z]{2,6}$', 'i');
		if(reg.test(mailadresse)){
			$("#emailvalide").hide();
			if(civ != ""){
				$("#civilitevalide").hide();
				$("#boutonForm").attr('disabled',false);
				$("#boutonForm").button('refresh', true);
			}else{
				$("#civilitevalide").show();
				$("#boutonForm").attr('disabled',true);
				$("#boutonForm").button('refresh', true);
			}
		}else{
				$("#emailvalide").show();
				$("#boutonForm").attr('disabled',true);
				$("#boutonForm").button('refresh', true);
			}
	}
	function bonCivilite(civ,mailadresse){
		if(civ != ""){
			$("#civilitevalide").hide();
			var reg = new RegExp('^[a-z0-9]+([_|\.|-]{1}[a-z0-9]+)*@[a-z0-9]+([_|\.|-]{1}[a-z0-9]+)*[\.]{1}[a-z]{2,6}$', 'i');
			if(reg.test(mailadresse)){
				$("#emailvalide").hide();
				$("#boutonForm").attr('disabled',false);
				$("#boutonForm").button('refresh', true);
			}else{
				$("#emailvalide").show();
				$("#boutonForm").attr('disabled',true);
				$("#boutonForm").button('refresh', true);
			}
		}else{
				$("#civilitevalide").show();
				$("#boutonForm").attr('disabled',true);
				$("#boutonForm").button('refresh', true);
		}
	}
	$$END$$
	$$IF0:FEAU$$
	$('#mailadresse').change(function(){
		var mailadresse = $('#mailadresse').val();
		bonmail(mailadresse);
	});
	function bonmail(mailadresse){
		var reg = new RegExp('^[a-z0-9]+([_|\.|-]{1}[a-z0-9]+)*@[a-z0-9]+([_|\.|-]{1}[a-z0-9]+)*[\.]{1}[a-z]{2,6}$', 'i');
		if(reg.test(mailadresse)){
			$("#boutonForm").attr('disabled',false);
			$("#boutonForm").button('refresh', true);
		}else{
			$("#boutonForm").attr('disabled',true);
			$("#boutonForm").button('refresh', true);
		}
	}
	$$END$$
	var $formCI = "$$IF:FORM:CI$$$$FORM:CI splitpart , 1 codeinsee2ville$$,$$FORM:CI splitpart , 2 codeinsee2ville$$,$$FORM:CI splitpart , 3 codeinsee2ville$$,$$FORM:CI splitpart , 4 codeinsee2ville$$,$$FORM:CI splitpart , 5 codeinsee2ville$$,$$FORM:CI splitpart , 6 codeinsee2ville$$,$$FORM:CI splitpart , 7 codeinsee2ville$$,$$FORM:CI splitpart , 8 codeinsee2ville$$,$$FORM:CI splitpart , 9 codeinsee2ville$$,$$FORM:CI splitpart , 10 codeinsee2ville$$,$$FORM:CI splitpart , 11 codeinsee2ville$$,$$FORM:CI splitpart , 12 codeinsee2ville$$,$$FORM:CI splitpart , 13 codeinsee2ville$$,$$FORM:CI splitpart , 14 codeinsee2ville$$,$$FORM:CI splitpart , 15 codeinsee2ville$$,$$FORM:CI splitpart , 16 codeinsee2ville$$,$$FORM:CI splitpart , 17 codeinsee2ville$$,$$FORM:CI splitpart , 18 codeinsee2ville$$,$$FORM:CI splitpart , 19 codeinsee2ville$$,$$FORM:CI splitpart , 20 codeinsee2ville$$,$$FORM:CI splitpart , 21 codeinsee2ville$$,$$FORM:CI splitpart , 22 codeinsee2ville$$,$$FORM:CI splitpart , 23 codeinsee2ville$$,$$FORM:CI splitpart , 24 codeinsee2ville$$,$$FORM:CI splitpart ,25 codeinsee2ville$$,$$FORM:CI splitpart , 25 codeinsee2ville$$,$$FORM:CI splitpart , 27 codeinsee2ville$$,$$FORM:CI splitpart , 28 codeinsee2ville$$,$$FORM:CI splitpart , 29 codeinsee2ville$$,$$FORM:CI splitpart , 30 codeinsee2ville$$,$$FORM:CI splitpart , 31 codeinsee2ville$$,$$FORM:CI splitpart , 32 codeinsee2ville$$,$$FORM:CI splitpart , 33 codeinsee2ville$$,$$FORM:CI splitpart , 34 codeinsee2ville$$,$$FORM:CI splitpart , 35 codeinsee2ville$$,$$END$$";
	var $formCP = "$$IF:FORM:CI$$$$FORM:CI splitpart , 1 codeinsee2cp$$,$$FORM:CI splitpart , 2 codeinsee2cp$$,$$FORM:CI splitpart , 3 codeinsee2cp$$,$$FORM:CI splitpart , 4 codeinsee2cp$$,$$FORM:CI splitpart , 5 codeinsee2cp$$,$$FORM:CI splitpart , 6 codeinsee2cp$$,$$FORM:CI splitpart , 7 codeinsee2cp$$,$$FORM:CI splitpart , 8 codeinsee2cp$$,$$FORM:CI splitpart , 9 codeinsee2cp$$,$$FORM:CI splitpart , 10 codeinsee2cp$$,$$FORM:CI splitpart , 11 codeinsee2cp$$,$$FORM:CI splitpart , 12 codeinsee2cp$$,$$FORM:CI splitpart , 13 codeinsee2cp$$,$$FORM:CI splitpart , 14 codeinsee2cp$$,$$FORM:CI splitpart , 15 codeinsee2cp$$,$$FORM:CI splitpart , 16 codeinsee2cp$$,$$FORM:CI splitpart , 17 codeinsee2cp$$,$$FORM:CI splitpart , 18 codeinsee2cp$$,$$FORM:CI splitpart , 19 codeinsee2cp$$,$$FORM:CI splitpart , 20 codeinsee2cp$$,$$FORM:CI splitpart , 21 codeinsee2cp$$,$$FORM:CI splitpart , 22 codeinsee2cp$$,$$FORM:CI splitpart , 23 codeinsee2cp$$,$$FORM:CI splitpart , 24 codeinsee2cp$$,$$FORM:CI splitpart ,25 codeinsee2cp$$,$$FORM:CI splitpart , 25 codeinsee2cp$$,$$FORM:CI splitpart , 27 codeinsee2cp$$,$$FORM:CI splitpart , 28 codeinsee2cp$$,$$FORM:CI splitpart , 29 codeinsee2cp$$,$$FORM:CI splitpart , 30 codeinsee2cp$$,$$FORM:CI splitpart , 31 codeinsee2cp$$,$$FORM:CI splitpart , 32 codeinsee2cp$$,$$FORM:CI splitpart , 33 codeinsee2cp$$,$$FORM:CI splitpart , 34 codeinsee2cp$$,$$FORM:CI splitpart , 35 codeinsee2cp$$,$$END$$";
	$(document).ready(function() {
		var num = $formCI.split(',');
		var numCP = $formCP.split(',');
		/* BOUCLE AFFICHAGE */
		for(i = 0; i < num.length; i ++) {
			if(num[i] != '') {
				if(i == 0) {
					$("#localisationAlerteAffichage").val(num[i]);
				} else {
					$("#localisationAlerteAffichage").val($("#localisationAlerteAffichage").val()+ ','+num[i]);
				}
			}
		}
		/* BOUCLE CP */
		for(j = 0; j < numCP.length; j ++) {
			if(numCP[j] != '') {
				if(j == 0) {
					$("#localisationAlerte").val(numCP[j]);
				} else {
					$("#localisationAlerte").val($("#localisationAlerte").val()+ ','+numCP[j]);
				}
			}
		}
		if($("#localisationAlerte").val().length == 0) {
			$("#localisationAlerte").remove();
			$("#localisationAlerteAffichage").attr('name','localisation');
			$("#localisationAlerteAffichage").remove();
		}
	});
</script>