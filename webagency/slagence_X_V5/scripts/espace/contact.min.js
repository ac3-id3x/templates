var espaceContactGeoMapId="";function chargeInfoAgence(c,o){$("#ctc-content").html(loading),$.ajax({type:"GET",data:"idp="+o,dataType:"html",url:"/agence,contact_ajax.htm",success:function(e){if($("#ctc-content").html(e),c){var t=espaceContactGeoMapId;if(document.getElementById(t)){var n=t+"-inner-"+id3xContent.geolocation.manager.initStringFromDate();document.getElementById(t).innerHTML='<div id="'+n+'" style="width: 100%; height: 100%;"></div>',id3xContent.addMap({container:{id:n},mapData:[{mapDataType:"AGENCIES",marker:{icon:{defaultIcon:{color:colorMarker}},popup:!0},filters:[{action:"single",key:"idPublication",value:o}]}]})}}},error:function(e,t,n){$("#ctc-content").html("Erreur de chargement...")},complete:function(){}})}$(window).load(function(){$("#bing-json-idp").val()||chargeInfoAgence(!1,$(".ctc-select-agence").val())}),$("#ctc-content").on("click",".agence-telephonez-nous",function(){var e=$(this);e.find("#texte-telephonez-nous").hide(),e.find("#numero-telephonez-nous").show(),e.attr("id",""),e.unbind("click")});var loadAgencyInfo=!0;function colorSelect(e){e.find("select").val()?e.addClass("filled"):e.removeClass("filled")}$(".ctc-select-agence").on("change",function(){loadAgencyInfo&&chargeInfoAgence(!(loadAgencyInfo=!1),$(this).val())}),$("#ctc-content").on("focusin",".ctc-field-input",function(){$(this).addClass("focused")}),$("#ctc-content").on("focusout",".ctc-field-input",function(){$(this).find(".ctc-field-txt").val()||$(this).removeClass("focused")}),$("#ctc-content").on("focusin",".ctc-field-textarea",function(){$(this).addClass("focused")}),$("#ctc-content").on("focusout",".ctc-field-textarea",function(){$(this).find(".ctc-field-txt").val()||$(this).removeClass("focused")}),$("#ctc-content").on("change",".ctc-field-select",function(){colorSelect($(this))}),$(function(){if($("#ctc-form-error").length){var e=0,t=$("#ctc-form-error").offset().top;"fixed"==$("header").css("position")&&(e=$("header").height()),$("html, body").animate({scrollTop:t-e-40},1e3)}});