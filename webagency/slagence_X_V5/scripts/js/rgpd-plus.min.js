var acceptRgpd=!1,deviceRgpd=detectDevice();function setRgpdSize(){var e=10,t=1,s=1,d=1,r=getDeviceRotation();switch(deviceRgpd){case 0:e=10,t=560,s=-280,d=600;break;case 1:e=3,s=(t=r.xAxis-20)/2*-1,d=20<r.yAxis-180?r.yAxis-180:20;break;case 2:e=10,t=560,s=-280,d=600}var l=document.getElementById("modalRgpdPlus"),a=document.getElementById("modalRgpdPlus-body");l&&(l.style.cssText+="top:"+e.toString()+"%;width:"+t.toString()+"px;margin-left:"+s.toString()+"px;"),a&&(a.style.cssText+="max-height:"+d.toString()+"px;")}setRgpdSize(),window.addEventListener("resize",function(e){setRgpdSize()},!1);var ckRgpd1=document.getElementById("ckbxRgpdPlus1"),ckRgpd2=document.getElementById("ckbxRgpdPlus2"),ckRgpd3=document.getElementById("ckbxRgpdPlus3"),ckRgpd4=document.getElementById("ckbxRgpdPlus4"),rgpdPlusOk=document.getElementsByName("rgpdPlusOk"),rgpdPlus3=document.getElementsByName("rgpdPlus3"),rgpdPlus4=document.getElementsByName("rgpdPlus4");function enableRgpdOk(){var e=$("#btnRgpdPlusAccept");rgpdPlus3&&(rgpdPlus3.value=ckRgpd3.checked?"1":"0"),rgpdPlus4&&(rgpdPlus4.value=ckRgpd4.checked?"1":"0"),acceptRgpd=ckRgpd1.checked&&ckRgpd2.checked?(e.removeClass("disabled"),!0):(e.addClass("disabled"),!1)}0<rgpdPlusOk.length&&(rgpdPlusOk=rgpdPlusOk[0]),0<rgpdPlus3.length&&(rgpdPlus3=rgpdPlus3[0]),0<rgpdPlus4.length&&(rgpdPlus4=rgpdPlus4[0]);var cksRgpd=[ckRgpd1,ckRgpd2,ckRgpd3,ckRgpd4];function getIdFormWithRgpd(e){var t=null,s=e.tagName.toLowerCase();return"body"!=s&&(t="form"===s?e.id:getIdFormWithRgpd(e.parentNode)),t}function sendMailWithRgpd(e){if(acceptRgpd){rgpdPlusOk&&(rgpdPlusOk.value="1");var t=getIdFormWithRgpd(e);t&&$.ajax({type:"POST",data:$("#"+t).serialize(),dataType:"json",url:"/alerte,incl_creation.htm",beforeSend:function(){$(".message-erreur-alerte").html("")},success:function(e){0<e.message.length?($(".message-erreur-alerte").html(e.message),e.nom.length<=0?$("#nom-alerte").parent().addClass("error").removeClass("success"):$("#nom-alerte").parent().removeClass("error").addClass("success"),e.email.length<=0||0==regEmail.test(e.email)?$("#email-alerte").parent().addClass("error").removeClass("success"):$("#email-alerte").parent().removeClass("error").addClass("success")):0<e.idInscription.length&&($("#nom-alerte").parent().removeClass("error").removeClass("success"),$("#email-alerte").parent().removeClass("error").removeClass("success"),$(".message-erreur-alerte").html(inscriptionOK))},error:function(e,t,s){console.log(e,t,s)},complete:function(){$(".message-erreur-alerte").show("slow").delay(1500).hide("slow")}})}}cksRgpd.forEach(function(e){e&&(e.parentNode.style.cssText+="text-align:left !important;",e.addEventListener("change",function(){enableRgpdOk()},!1))});var btnRgpdOk=document.getElementById("btnRgpdPlusAccept");btnRgpdOk&&btnRgpdOk.addEventListener("click",function(){sendMailWithRgpd(this)},!1);