var regEmail=new RegExp("^[0-9a-z._-]+@{1}[0-9a-z.-]{2,}[.]{1}[a-z]{2,5}$","i"),regTel=new RegExp("^(01|02|03|04|05|06|0708|09)[0-9]{8}$","i");function searchListeBiens(e,s,n){if(s.hasClass("searchDone"))return!1;$.ajax({type:"GET",data:"idpublication="+e+"&lang="+n,dataType:"json",url:"/agences,search_liste_biens.htm",beforeSend:function(){},success:function(e){var n=s.children(".liste-biens");if(e.transaction){var a=e.transaction.length,t='<ul class="nav nav-pills nav-stacked nav-biens-agence">';for(i=0;i<a;i++)t+='<li><a href="'+e.transaction[i].url+'">'+e.transaction[i].nbannonces+" "+e.transaction[i].name+"</a></li>";t+="</ul>",n.html(n.html()+t)}else n.append(e.message)},error:function(e,n,a){console.log(e,n,a)},complete:function(){s.addClass("searchDone")}})}function sliderAgence(n,e){$("html").hasClass("ie7")?n.hasClass("blocOpen")?n.addClass("display-none").removeClass("blocOpen").removeClass("display-show"):n.addClass("display-show").addClass("blocOpen"):n.hasClass("blocOpen")?n.slideUp(200,"swing",function(){$(this).removeClass("blocOpen")}):n.slideDown(300,"swing",function(){if($(this).addClass("blocOpen"),hasMaps){var e=n&&n.children()&&n.children().children()?n.children().children()[0]:null;null!=e&&null!=id3xContent&&id3xContent.addMap({container:{id:e.id},mapData:[{mapDataType:"AGENCIES",marker:{icon:{defaultIcon:{color:id3xContent.values.colorMarker}},popup:!0},filters:[{action:"single",key:"idPublication",value:e.dataset.rel}]}]})}}),e&&e()}$(document).ready(function(){$(".zone-agence-ajax, .detail-agence-liste").on("click",'.bouton-message-agence, .bouton-carte-agence, .bouton-biens-agence, div[class*="bouton-biens-agence"]',function(e){e.preventDefault();var n=0,a=0,t=$(this).attr("class");if($(this).hasClass("bouton-carte-agence")){var s=$(this).parent().parent().parent().children(".zone-carte-agence");a=1}else if(-1<t.indexOf("bouton-biens-agence"))s=$(this).parent().parent().parent().children(".zone-biens-agence"),n=1;else s=$(this).parent().parent().parent().children(".zone-message-agence");1==a?hasMaps=!0:1==n&&searchListeBiens($(this).attr("data-rel"),s,$(this).attr("data-langue"));var i=$("div").find(".blocOpen");i.hasClass("blocOpen")?sliderAgence(i,function(){sliderAgence(s)}):sliderAgence(s)}),$("#triAgences").change(function(){var e=$(this).val(),n=$("#form-tri").attr("action");0<e.length&&(0<n.indexOf("?")?n+="&tri="+e:n+="?tri="+e),window.location.href=n}),$(".filtre-agence").change(function(){"cp"==$(this).attr("name")&&$("#filtre-ci").val("");var e=$("#filtre-cp").val(),n=$("#filtre-ci").val();if(n)var a="?cp="+n+"&dep="+e;else if(e)a="?cp="+e+"&dep="+e;else a="";window.location.href="/agences,liste.htm"+a}),winW<840&&($(".txt-agence").removeClass("hidden-phone"),$(".txt-agence").addClass("display-none"),$(".plus-text").addClass("general typoicon-plus"),$(".phrase-agences").on("click",function(){"+"==$(this).parent().children(".plus-text ").html()?$(this).parent().children(".plus-text ").html("-"):$(this).parent().children(".plus-text ").html("+"),$(".txt-agence").slideToggle()}))});