function fixStar(){var e=$(".bouton-ajouter-selection-detail"),t=e.attr("data-title-ok");e.attr("data-original-title",t).tooltip("fixTitle").find("img").attr("src","/z/webagency/slagence_X_V5/images/widget/star_ok.png")}function changeFormulaire(e){$("#container-form-contact-agence").show(),$("#form-contact-agence").show(),$(".message-erreur-alerte").hide();var t=$(".descriptif-annonce");switch(e){case"1":container.hide(),$("#bloc-formulaire-plus-detail").hide(),$("#bloc-formulaire-etre-rappele").show(),$("#bloc-formulaire-visiter-bien").hide(),t.length>0&&t.hide(),TexteDefault=TexteRappel;break;case"2":container.show(),$("#bloc-formulaire-plus-detail").show(),$("#bloc-formulaire-etre-rappele").hide(),$("#bloc-formulaire-visiter-bien").hide(),t.length>0&&t.hide(),TexteDefault=TextePlusinfo;break;case"3":container.hide(),$("#bloc-formulaire-plus-detail").hide(),$("#bloc-formulaire-etre-rappele").hide(),$("#bloc-formulaire-visiter-bien").show(),t.length>0&&t.hide(),TexteDefault=TexteVisiter;break;case"4":container.hide(),$("#container-form-contact-agence").hide(),$("#bloc-formulaire-plus-detail").hide(),$("#bloc-formulaire-etre-rappele").hide(),$("#bloc-formulaire-visiter-bien").hide(),window.location.href=$("#pageEstimationInput").val();break;default:container.hide(),$("#bloc-formulaire-plus-detail").hide(),$("#bloc-formulaire-etre-rappele").hide(),$("#bloc-formulaire-visiter-bien").hide(),t.length>0&&t.show(),$("#container-form-contact-agence").hide()}if(winW<600){var i=$("#container-form-contact-agence").offset();return $("html, body").animate({scrollTop:i.top},600),!1}$("#type-message").val(e),container.val(TexteDefault)}function sendNewFriend(e,t){$(".nouvel-envoi-ami").on("click",function(i){$("#toemail").val(""),$("#tonom").val(""),e.button("reset"),e.html(t),e.show("slow"),$(".message-erreur-ami").hide("slow"),$(".nouvel-envoi-ami").hide("slow"),e.button("reset")})}var TexteDefault,TextePlusinfo,container=$("#message"),regEmail=new RegExp("^[0-9a-z._-]+@{1}[0-9a-z.-]{2,}[.]{1}[a-z]{2,5}$","i"),backLinkSearch="recherche,basic";$(document).ready(function(){container.val(TextePlusinfo),winW>600&&($(".ligne-detail-bloc-annonce-similaire").each(function(){$(this).hover(function(){$(this).find(".detail-bloc-annonce-similaire-photo").find(".display-none").length>0&&($(this).find(".detail-bloc-annonce-similaire-photo").find(".picture-responsive").first().hide(),$(this).find(".detail-bloc-annonce-similaire-photo").find(".picture-responsive").last().show())},function(){$(this).find(".detail-bloc-annonce-similaire-photo").find(".display-none").length>0&&($(this).find(".detail-bloc-annonce-similaire-photo").find(".picture-responsive").first().show(),$(this).find(".detail-bloc-annonce-similaire-photo").find(".picture-responsive").last().hide())})}),$(".bouton-video-detail").on("click",function(e){e.preventDefault(),$(".bouton-video-detail").colorbox({iframe:!0,innerWidth:720,innerHeight:480,fastIframe:!1})}),$(".bouton-video-360").on("click",function(e){e.preventDefault(),$(".bouton-video-360").colorbox({iframe:!0,innerWidth:720,innerHeight:490,fastIframe:!1})}),$(".bouton-pdf-detail").on("click",function(e){e.preventDefault(),$(".bouton-pdf-detail").colorbox({iframe:!0,innerWidth:720,innerHeight:576})})),$(".titre-divers").each(function(){$(this).on("click",function(){rel=$(this).attr("data-rel"),norel=$(this).attr("data-no-rel"),$(this).parent().find(".actif-tab").addClass("inactif-tab").removeClass("actif-tab"),$(this).removeClass("inactif-tab").addClass("actif-tab"),$("#"+rel).show(),$("#"+norel).hide()})}),$(".bouton-form-envoyer-ami").on("click",function(e){e.preventDefault();var t=$(this),i=t.html();t.button("loading"),$.ajax({type:"POST",data:$("#form-envoi-ami").serialize(),dataType:"json",url:"/contact,ami_envoi.htm",beforeSend:function(){$(".message-erreur-ami").html("")},success:function(e){1==e.envoi?($(".message-erreur-ami").html(messageAmiOK),t.html(boutonOK),t.hide("slow"),$(".nouvel-envoi-ami").show("slow")):(e.email_from.length<=0?$("#email_from").parent().addClass("error"):$("#email_from").parent().removeClass("error"),e.nom_from.length<=0?$("#nom_from").parent().addClass("error"):$("#nom_from").parent().removeClass("error"),e.email_to.length<=0?$("#toemail").parent().addClass("error"):$("#toemail").parent().removeClass("error"),e.nom_to.length<=0?$("#tonom").parent().addClass("error"):$("#tonom").parent().removeClass("error"),$(".message-erreur-ami").html(e.erreur),t.button("reset"))},error:function(e,t,i){},complete:function(){$(".message-erreur-ami").show("slow"),sendNewFriend(t,i)}})}),$(".bouton-ajouter-selection-detail").on("click",function(e){e.preventDefault();var t=$(this),i=t.attr("data-title-ok"),a=t.text(),n=t.find("img").attr("src"),o=t.attr("data-idannonce"),r=t.attr("data-idpublication");n.indexOf("star_ok")>0?$.ajax({type:"GET",data:"idannonce="+o+"&idp="+r,url:"/scripts,panier,selection_supprimer.htm",dataType:"json",cache:!1,success:function(e){t.attr("data-original-title",a).tooltip("fixTitle").find("img").attr("src","/z/webagency/slagence_X_V5/images/widget/"+iconColor+"/star.png"),$(".fix-panier").attr("alt",e.nbAnnonces).attr("data-title",e.nbAnnonces).attr("title",e.nbAnnonces)}}):$.ajax({type:"GET",data:"idannonce="+o+"&idpublication="+r,url:"/scripts,panier,selection_ajouter.htm",dataType:"json",cache:!1,success:function(e){t.attr("data-original-title",i).tooltip("fixTitle").find("img").attr("src","/z/webagency/slagence_X_V5/images/widget/star_ok.png"),$(".fix-panier").attr("alt",e.nbAnnonces).attr("data-title",e.nbAnnonces).attr("title",e.nbAnnonces)}})}),$("#SelectSujet").change(function(){changeFormulaire($(this).val())}),$(".bouton-formulaire-agence").on("click",function(){changeFormulaire($(this).attr("data-message"))}),$(".bouton-formulaire-fermer").on("click",function(){changeFormulaire(0)}),$(".message-erreur-alerte").on("click",".bouton-envoyer-nouveau-message",function(e){e.preventDefault(),$("#form-contact-agence").show(),$(".message-erreur-alerte").hide()}),$(".bouton-contact-agence").on("click",function(){var e=$(this);e.button("loading");var t=$("#form-contact-agence").serialize(),i=t.replace(",/g",","),a=i.replace(/%0D%0A/g," ");$.ajax({type:"POST",data:a,dataType:"json",url:"/detail,incl_contact_agence_email.htm",beforeSend:function(){$(".message-erreur-alerte").html("")},success:function(t){t.message.length>0?($(".message-erreur-alerte").html(t.message),t.nom.length<=0?$("#cnom").parent().addClass("error"):$("#cnom").parent().addClass("success").removeClass("error"),t.email.length<=0||0==regEmail.test(t.email)?$("#from").parent().addClass("error"):$("#from").parent().addClass("success").removeClass("error"),t.message_user.length<=10?$("#message").parent().addClass("error"):$("#message").parent().addClass("success").removeClass("error"),$(".message-erreur-alerte").html(t.message)):($("#form-contact-agence").hide(),$("#cnom").parent().removeClass("error"),$("#from").parent().removeClass("error"),$("#message").parent().removeClass("error"),$(".message-erreur-alerte").html(messageOK),e.html(boutonOK))},error:function(e,t,i){},complete:function(){e.button("reset"),$(".message-erreur-alerte").show()}})}),$(".dpe-show").css("cursor","pointer"),$(".dpe-show").on("click",function(e){$(this).parent().children(".containerDiagramme").hasClass("dpeOpen")?$(this).parent().children(".containerDiagramme").hide().removeClass("dpeOpen"):$(this).parent().children(".containerDiagramme").show().addClass("dpeOpen")}),$(".mentions").find(".accordion-group").each(function(e){$(this).children(".accordion-body").hasClass("in")?$(this).find(".accordion-toggle").append('<div class="minus absolute top right margin-top-10 margin-right-10"><i class="opacity-3 right smallest general typoicon-minus"></i></div>'):$(this).find(".accordion-toggle").append('<div class="plus absolute top right margin-top-10 margin-right-10"><i class=" opacity-3 right smallest general typoicon-plus"></i></div>')}),$(".mentions").find(".accordion-body").on("show",function(e){$(this).parent().find(".accordion-toggle").find(".minus").remove(),$(this).parent().find(".accordion-toggle").find(".plus").remove(),$(this).parent().find(".accordion-toggle").append('<div class="minus absolute top right margin-top-10 margin-right-10"><i class="opacity-3 right smallest general typoicon-minus"></i></div>')}),$(".mentions").find(".accordion-body").on("hide",function(e){$(this).parent().find(".accordion-toggle").find(".minus").remove(),$(this).parent().find(".accordion-toggle").find(".plus").remove(),$(this).parent().find(".accordion-toggle").append('<div class="plus absolute top right margin-top-10 margin-right-10"><i class="opacity-3 right smallest general typoicon-plus"></i></div>')}),$(".bouton-zoom-detail").on("click",function(e){e.preventDefault();var t=$(".nivo-controlNav").find(".active").attr("rel");$(".gallery").eq(t).click()}),$(".lien-poi").on("click",function(e){e.preventDefault();var t=$($(this).attr("href")).offset();return $("html, body").animate({scrollTop:t.top},600),!1})});