$$REM$$
====================================================================
//// <summary>Page d'administration produit : Gestion des lignes de produit </summary>
//// <remarks>
//// <para>Pages html inclues : </para>
//// <para>Liste des macros B utilisées dans cette page (sans &dollar;&dollar;) : GDP2:ZONE_SELECT alias SELTYPE </para>
//// <para>Liste des macros B utilisées dans cette page (sans &dollar;&dollar;) : GDP2:ZONE_SELECT alias SELTABLE </para>
//// <para>Liste des macros E utilisées dans cette page (sans &dollar;&dollar;) : GDP2:LECTURE_LIGNE_PRODUIT alias LIGNEPRODUIT </para>
//// <para>Liste des macros E utilisées dans cette page (sans &dollar;&dollar;) : AUTH:VERIFICATION </para>
//// <para>Liste des macros P utilisées dans cette page (sans &dollar;&dollar;) : GDP2:MAJ_LIGNEPRODUIT </para>
//// </remarks>
//// <update date="2007-11-20" author="jean-jacques.durmord">Création</update>
===============
$$END:REM$$

$$B:GDP2:ZONE_SELECT:~TYPE:1:ALIAS:SELTYPE$$
$$B:GDP2:ZONE_SELECT:~TYPE:2:ALIAS:SELTABLE$$
$$E:GDP2:LECTURE_LIGNE_PRODUIT:~ID:REP:1:ALIAS:LIGNEPRODUIT$$
$$E:AUTH:VERIFICATION$$

$$IF:AUTH:VERIFICATION:ADMINISTRATION$$
	$$IF:GDP2:MAJ_LIGNEPRODUIT:ERRMSG$$
		<p class="erreur" >Message d'erreur : $$GDP2:MAJ_LIGNEPRODUIT:ERRMSG$$</p>
	$$END$$
	<form id="frmligneproduit" name="frmligneproduit" action="/$$REP:URI$$" method="post" onSubmit="return validate('frmligneproduit',var_AMPL,msg_AMPL);">
		<input type="hidden" name="u" value="GDP2:MAJ_LIGNEPRODUIT">
		<input type="hidden" name="page_ok" value="$$REP:URI$$">
		<input type="hidden" name="page_err" value="$$REP:URI$$">
		<input type="hidden" name="id" value="$$REP:1$$">
		<h1> Ligne de produit</h1>
		<div  class="cadrefonce">
			$$IF!:0:LIGNEPRODUIT:NBRASSOC$$Nombre de produit associé : $$LIGNEPRODUIT:NBRASSOC$$$$END$$
			&nbsp;
			<table>
				<tr >
		     	<td ><label for="txtlibelle" >Libellé *</label></td>
		      <td >
		      		<input id="txtlibelle" name="txtlibelle" type="text" 
		      		$$IF!:0:LIGNEPRODUIT:NBRASSOC$$$$IF!:0:REP:1$$readonly="readonly"$$END$$$$END$$
		      		value="$$LIGNEPRODUIT:LPRO_LIBELLE$$" /> 
		      </td>
		      <td width="10px" ></td>
		      <td ><label for="txtmnemonique" >Mnémonique *</label></td>
		      <td >
		      		<input id="txtmnemonique" name="txtmnemonique" type="text" 
		      			$$IF!:0:REP:1$$readonly="readonly"$$END$$ 
		      			value="$$LIGNEPRODUIT:LPRO_MNEMONIQUE$$" />
		      </td>
				</tr>
	      <tr>
	     		<td ><label  >Type de donnée * </td>
	        <td class=td>
	            <select id="cbotypedonnee" name="cbotypedonnee" style="width: 150px" 
	            	$$IF!:0:LIGNEPRODUIT:NBRASSOC$$$$IF!:0:REP:1$$readonly="readonly"$$END$$$$END$$>
	                <option value="">-----------------</option>
	                $$BIF:SELTYPE$$
	                	$$DO$$
	                		<option value="$$SELTYPE:ID$$"  $$IF=:SELTYPE_ID:LIGNEPRODUIT:LPRO_TYPEDONNEE$$ selected $$END$$ >$$SELTYPE:VALEUR$$</option>
	                	$$LOOP$$
	                $$BFIN$$
	            </select>
	            
	        </td>
	        <td width="10px" ></td>
	        <td ><label for="txttaille" >Taille *</td>
	        <td ><input id="txttaille" name="txttaille" type="text" $$IF!:0:LIGNEPRODUIT:NBRASSOC$$$$IF!:0:REP:1$$$$END$$$$END$$ value="$$LIGNEPRODUIT:LPRO_LONGUEUR$$"/></td>
	     </tr>
	      <tr>
	          <td ><label  >Table Auxilliaire</label></td>
	          <td >
	              <select id="cbotableaux" name="cbotableaux" style="width: 150px; font-size: 9px;" 
	              	$$IF!:0:LIGNEPRODUIT:NBRASSOC$$$$IF!:0:REP:1$$readonly="readonly"$$END$$$$END$$>
	                  <option value="">-----------------</option>
	                  $$BIF:SELTABLE$$
		                	$$DO$$
		                		<option value="$$SELTABLE:ID$$" $$IF=:SELTABLE_ID:LIGNEPRODUIT:LPRO_TBLSUPPL$$ selected $$END$$>$$SELTABLE:VALEUR$$</option>
		                	$$LOOP$$
	                	$$BFIN$$
	              </select>
	          </td>
	          <td width="10px" ></td>
	          <td ><label for="chktableliaison" >C'est une table de liaison</label></td>
	          <td ><input id="chktableliaison" name="chktableliaison" type="checkbox" $$IF!:0:LIGNEPRODUIT:NBRASSOC$$$$IF!:0:REP:1$$disabled="disabled"$$END$$$$END$$ $$IF=:True:LIGNEPRODUIT:LPRO_MULTILIGNE$$ checked $$END$$ /></td>
	      </tr>
	      <tr>
	          <td ><label  > Table </label></td>
	          <td >
	              <select id="cbotable" name="cbotable" style="width: 150px; font-size: 9px;" 
	              	$$IF!:0:LIGNEPRODUIT:NBRASSOC$$$$IF!:0:REP:1$$readonly="readonly"$$END$$$$END$$ >
	                  <option value="" >-----------------</option>
	                  $$BIF:SELTABLE$$
		                	$$DO$$
		                		<option value="$$SELTABLE:ID$$" $$IF=:SELTABLE_ID:LIGNEPRODUIT:LPRO_TBLLIAISON$$ selected $$END$$ >$$SELTABLE:VALEUR$$</option>
		                	$$LOOP$$
	                	$$BFIN$$
	              </select>
	          </td>
	          <td width="10px" ></td>
	          <td ><label for="txtliaison" > IDLIAISON </label></td>
	          <td ><input id="txtliaison" name="txtliaison" type="text" $$IF!:0:LIGNEPRODUIT:NBRASSOC$$$$IF!:0:REP:1$$readonly="readonly"$$END$$$$END$$ value="$$LIGNEPRODUIT:LPRO_IDLIAISON$$" /></td>
	      </tr>
	      <tr>
	          <td ><label for="txtvaldefaut" > Valeur par Défaut </label></td>
	          <td ><input id="txtvaldefaut" name="txtvaldefaut" type="text"   value="$$LIGNEPRODUIT:LPRO_DEFAUT$$" /></td>
	          <td width="10px" ></td>
	          <td ><label for="txtexpressionregul" > Expression régulière</td>
	          <td > <input id="txtexpressionregul" name="txtexpressionregul" type="text"   value="$$LIGNEPRODUIT:LPRO_EXPRESSIONCONTROLE$$" /> </td>
	      </tr>
	      <tr>
	          <td ><label for="chkactif" > Actif </label></td>
	          <td ><input id="chkactif" name="chkactif" type="checkbox" $$IF=:True:LIGNEPRODUIT:LPRO_ACTIF$$ checked $$END$$/></td>
	          <td width="10px" ></td>
	          <td > </td>
	          <td > </td>
	      </tr>
			</table>
	    $$IF=:1:REP:2$$
	    	<p align=right ><input id="btnAMPLreset" type="reset" value="Annulation" />
	    		&nbsp;<input id="btnAMPLvalidation" type="submit" value="Validation"  /></p>
			$$END$$		
		</div>
		(*) Champs obligatoires
	</form>
$$END$$
$$IF0:AUTH:VERIFICATION:ADMINISTRATION$$
	<p class="erreur" >Vous n'avez pas les autorisations nécessaire pour visualiser cette page</p>
$$END$$
<script >
/*
				Valeur 	Origine 		Vérification 
				-------------------------------------------------------------------------------------------------------
				e 			empty 			l'élément ne doit pas être vide 
				n 			number 			l'élément doit être un nombre 
				m 			mail 				une adresse élctronique doit être exacte sur la forme 
				r 			regexp 			la valeur doit correspondre à un modèle déterminé 
				p 			price 			la valeur doit se présenter sous la forme "10,00" (avec virgule) 
				p. 			price_dot 	la valeur doit se présenter sous la forme "10.00" (avec point) 
				c 			capitalize 	Les noms propres doivent être corrigés 
 				t				length			Contrôle si on dépasse pas la taille max
*/
		var msg_AMPL = 'GESTPROD V2 - Erreur - Formulaire';

		var var_AMPL = new Array()
		var_AMPL[0] = new Array('txtlibelle','e','Vous n\'avez pas mentionné le libellé','');
		var_AMPL[1] = new Array('txtlibelle','t',': cette valeur est trop grande (max:256)','256');
		var_AMPL[2] = new Array('txtmnemonique','e','Vous n\'avez pas mentionné le mnémonique','');
		var_AMPL[3] = new Array('txtmnemonique','t',': cette valeur est trop grande (max:20)','20');
		var_AMPL[4] = new Array('cbotypedonnee','e','Vous n\'avez pas mentionné le type de donnée','');
		var_AMPL[5] = new Array('txttaille','e','Vous n\'avez pas mentionné la taille','');
		var_AMPL[6] = new Array('txttaille','n',': cette valeur doit-être un nombre','');
		var_AMPL[7] = new Array('txtliaison','t',': cette valeur est trop grande (max:50)','50');
		var_AMPL[8] = new Array('txtvaldefaut','t',': cette valeur est trop grande (max:256)','256');
		var_AMPL[9] = new Array('txtexpressionregul','t',': cette valeur est trop grande (max:50)','50');

</script>